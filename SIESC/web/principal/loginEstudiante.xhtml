<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <body>
      
<ui:composition template="templatePrincipal.xhtml">
<ui:define name="content">

<div class="login-wrapper">

    <div class="login-image">
          <p:graphicImage library="imagenes" name="sistema/logo_tec.jpg" />
    </div>

    <div class="login-card">
        <h:form>
                           <div class="login-logo">
                           <i class="pi pi-user"></i>
                            </div>
          
            <h2>Iniciar Sesión</h2>
            <p class="subtitulo-login">Sistema Integral de Servicios Escolares</p>

            <!-- Usuario -->
            <div class="ui-inputgroup">
                <div class="ui-inputgroup-addon">
                    <i class="pi pi-user"></i>
                </div>
                <p:inputText id="usr" value="#{loginBean.usuario}" required="true" placeholder="Usuario" />
            </div>

            <!-- Contraseña -->
            <div class="ui-inputgroup">
                <div class="ui-inputgroup-addon">
                    <i class="pi pi-lock"></i>
                </div>
        <div class="password-wrapper">
            <p:password id="pass"
                        value="#{loginBean.contrasena}"
                        placeholder="Contraseña"
                        feedback="false" />

            <i class="pi pi-eye toggle-eye"
               onclick="togglePassword(this)"></i>
        </div>



            </div>
            
            


            <!-- Botón -->
            <p:commandButton value="Iniciar Sesión" action="#{loginBean.loginEstudiante()}" ajax="false" styleClass="iniciar-sesion" />

            <!-- Mensaje motivacional -->
            <p class="mensaje-motivacional">
                Lo que aprendas hoy construye el mañana que sueñas.
            </p>

            <!-- Pie interno -->
            <p class="pie-login">
              ¿Problemas para acceder?  Contacta a soporte escolar.
            </p>

        </h:form>
    </div>
</div>
<script>
    function togglePassword(icon) {

        // Busca el input REAL generado por PrimeFaces
        const wrapper = icon.closest('.password-wrapper');
        const input = wrapper.querySelector('input');

        if (!input) {
            console.error("No se encontró el input password");
            return;
        }

        if (input.type === 'password') {
            input.type = 'text';
            icon.classList.remove('pi-eye');
            icon.classList.add('pi-eye-slash');
        } else {
            input.type = 'password';
            icon.classList.remove('pi-eye-slash');
            icon.classList.add('pi-eye');
        }
    }
</script>
    


<style>


/* ======== CONTENEDOR PRINCIPAL ======== */
.login-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -48%);
    display: flex;
    width: 92%;
    max-width: 900px;
    max-width: 1000px;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
            overflow: hidden;
}
/* ======== LADO IMAGEN ======== */
        .login-image {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
           background: #003366;
            padding: 0;
        }

        .login-image img {
            width: 100%;
            height: 60%;
            object-fit: cover;
        }

/* ======== FORMULARIO ======== */
.login-card {
    flex: 2;
    padding: 2rem 2.2rem;
    text-align: center;
}
.login-logo {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 1rem;
}

.login-logo i {
    font-size: 5rem;      /* Tamaño del icono */
    color: #3f51b5;       /* Ajusta al color de tu tema Ultima */
}


/* TÍTULO */
h2 {
    color: #003366;
    font-size: 1.6rem;
    margin-bottom: 0.2rem;
    font-weight: 600;
    letter-spacing: 0.5px;
}

/* SUBTÍTULO */
.subtitulo-login {
    color: #5d6675;
    font-size: 0.95rem;
    margin-bottom: 1.4rem;
    font-weight: 400;
}

/* ======== INPUTS ======== */
.ui-inputgroup {
    margin-bottom: 0.9rem !important;
                justify-content: center;
            align-items: center;
}

.ui-inputgroup-addon {
    background: #003366;
    color: #ffffff;
    border: none;
    border-radius: 6px 0 0 6px;
    padding: 0.85rem;
  
    
    
}

input.ui-inputfield,
.ui-password input {
    width: 60%;
    padding: 0.7rem;
    border: 1px solid #cfd6e0;
    border-radius: 0 6px 6px 0;
    background: #ffffff;
    font-size: 0.95rem;
    transition: border-color .2s ease;
}

/* FOCUS: azul institucional */
input.ui-inputfield:focus,
.ui-password input:focus {
    border-color: #003366;
    outline: none;
}

/* ======== BOTÓN LOGIN ======== */
.iniciar-sesion {
     background-color: #003366 !important; /* Color  */
    border: none !important;
    color: white !important;
     font-weight: 500;
    padding: 0.9rem;
    border-radius: 6px;
    width: 50%;
    margin-top: 0.6rem;
    transition: background .2s ease;
}

/* Quita estilos internos de PrimeFaces */
.iniciar-sesion .ui-button-text {
    padding: 0 !important;
    line-height: 1.2 !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Hover */
.iniciar-sesion:hover {
    background-color:#037DBE !important; /* el color que cambia */
}




/* ======== TEXTOS PEQUEÑOS ======== */
.mensaje-motivacional {
    margin-top: 1.2rem;
    color: #5d6675;
    font-size: 0.85rem;
    font-style: italic;
}

.pie-login {
    margin-top: 1.6rem;
    color: #7a8291;
    font-size: 0.75rem;
}

/* ======== RESPONSIVE ======== */
@media (max-width: 768px) {
    .login-wrapper {
        flex-direction: column;
        max-width: 420px;
        border-radius: 10px;
    }

    .login-image img {
        height: 160px;
    }
}


.password-wrapper {
    position: relative;
    width: 60%;
    display: flex;
                justify-content: center;
            align-items: center;
}


.password-wrapper input,
.ui-password input {
    width: 100%;
    padding: 0.7rem;
    border: 1px solid #ccc;
    border-radius: 0 6px 6px 0;
    transition: border-color 0.3s ease;
    box-sizing: border-box;
}


.toggle-eye {
    position: absolute;
    right: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    z-index: 10;
    font-size: 1.2rem;
    color: #6b7280;
}

.toggle-eye:hover {
    color: #3f51b5;
}
.password-wrapper input:focus {
    border-color: #0066cc;
    outline: none;
}

</style>
</ui:define>
</ui:composition>

    
    </body>
</html>

